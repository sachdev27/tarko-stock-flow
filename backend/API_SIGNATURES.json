{
  "auth_routes": {
    "/api/auth/login": {
      "method": "POST",
      "description": "Authenticate user and receive JWT access token",
      "authentication": "None",
      "request_body": {
        "email": {
          "type": "string",
          "required": true,
          "description": "User email address"
        },
        "password": {
          "type": "string",
          "required": true,
          "description": "User password"
        }
      },
      "response": {
        "access_token": "string",
        "user": {
          "id": "UUID",
          "email": "string",
          "username": "string",
          "name": "string",
          "role": "string"
        }
      }
    },
    "/api/auth/register": {
      "method": "POST",
      "description": "Register a new user account",
      "authentication": "None",
      "request_body": {
        "email": {
          "type": "string",
          "required": true
        },
        "password": {
          "type": "string",
          "required": true
        },
        "username": {
          "type": "string",
          "required": true
        },
        "name": {
          "type": "string",
          "required": false
        }
      },
      "response": {
        "message": "string",
        "user_id": "UUID"
      }
    },
    "/api/auth/me": {
      "method": "GET",
      "description": "Get current authenticated user information",
      "authentication": "JWT Required",
      "response": {
        "id": "UUID",
        "email": "string",
        "username": "string",
        "name": "string",
        "role": "string",
        "created_at": "datetime"
      }
    },
    "/api/auth/logout": {
      "method": "POST",
      "description": "Logout current user",
      "authentication": "JWT Required",
      "response": {
        "message": "string"
      }
    }
  },
  "dispatch_routes": {
    "/api/dispatch/available-rolls": {
      "method": "POST",
      "description": "Get available rolls/cut rolls for dispatch based on product selection",
      "authentication": "JWT Required",
      "request_body": {
        "product_type_id": {
          "type": "UUID",
          "required": true,
          "description": "Product type ID"
        },
        "brand_id": {
          "type": "UUID",
          "required": false,
          "description": "Brand ID (optional for 'All Brands')"
        },
        "parameters": {
          "type": "object",
          "required": false,
          "description": "Product parameters (e.g., {OD: '32', PN: '6'})"
        }
      },
      "response": {
        "products": {
          "type": "array",
          "description": "List of available products grouped by product label",
          "items": {
            "product_label": "string",
            "product_type": "string",
            "brand": "string",
            "parameters": "object",
            "product_category": "string (HDPE/SPRINKLER)",
            "standard_rolls": "array",
            "cut_rolls": "array",
            "bundles": "array",
            "spares": "array",
            "total_available_meters": "float"
          }
        }
      }
    },
    "/api/dispatch/cut-roll": {
      "method": "POST",
      "description": "Cut a standard roll or cut roll into smaller cut rolls",
      "authentication": "JWT Required",
      "request_body": {
        "stock_id": {
          "type": "UUID",
          "required": true,
          "description": "Inventory stock ID for FULL_ROLL"
        },
        "roll_id": {
          "type": "UUID",
          "required": false,
          "description": "Backward compatibility alias for stock_id"
        },
        "cuts": {
          "type": "array",
          "required": true,
          "description": "Array of cut specifications",
          "items": {
            "length": "float (meters)"
          }
        }
      },
      "response": {
        "message": "string",
        "cut_stock_id": "UUID",
        "new_cut_pieces": "array of {id: UUID, length_meters: float}",
        "pieces_created": "integer"
      }
    },
    "/api/dispatch/cut-bundle": {
      "method": "POST",
      "description": "Cut a sprinkler bundle into spare pieces",
      "authentication": "JWT Required",
      "request_body": {
        "stock_id": {
          "type": "UUID",
          "required": true,
          "description": "Inventory stock ID for BUNDLE"
        },
        "roll_id": {
          "type": "UUID",
          "required": false,
          "description": "Backward compatibility alias for stock_id"
        },
        "cuts": {
          "type": "array",
          "required": true,
          "description": "Array of split specifications",
          "items": {
            "pieces": "integer (number of pieces to split)"
          }
        }
      },
      "response": {
        "message": "string",
        "new_spare_pieces": "array",
        "spares_created": "integer"
      }
    },
    "/api/dispatch/create": {
      "method": "POST",
      "description": "LEGACY: Create a dispatch/sale transaction (old system)",
      "authentication": "JWT Required",
      "request_body": {
        "customer_id": {
          "type": "UUID",
          "required": true
        },
        "invoice_number": {
          "type": "string",
          "required": false
        },
        "notes": {
          "type": "string",
          "required": false
        },
        "transaction_date": {
          "type": "date",
          "required": false
        },
        "items": {
          "type": "array",
          "required": true,
          "items": {
            "type": "string (full_roll/partial_roll)",
            "roll_id": "UUID",
            "quantity": "float (1 for full, meters for partial)"
          }
        }
      },
      "response": {
        "message": "string",
        "transaction_id": "UUID",
        "total_quantity": "float",
        "rolls_count": "integer"
      }
    },
    "/api/dispatch/products-summary": {
      "method": "GET",
      "description": "Get aggregated product inventory grouped by product category",
      "authentication": "JWT Required",
      "query_params": {
        "brand_id": {
          "type": "UUID",
          "required": false
        },
        "product_type_id": {
          "type": "UUID",
          "required": false
        }
      },
      "response": {
        "products": {
          "type": "array",
          "items": {
            "variant_id": "UUID",
            "product_type_id": "UUID",
            "product_type": "string",
            "brand_id": "UUID",
            "brand": "string",
            "parameters": "object",
            "roll_configuration": "object",
            "standard_rolls_count": "integer",
            "cut_rolls_count": "integer",
            "bundles_count": "integer",
            "spare_pieces_count": "integer",
            "total_quantity": "float",
            "avg_standard_length": "float",
            "total_items": "integer"
          }
        }
      }
    },
    "/api/dispatch/product-rolls/<variant_id>": {
      "method": "GET",
      "description": "Get all available rolls for a specific product variant",
      "authentication": "JWT Required",
      "response": {
        "standard_rolls": "array",
        "cut_rolls": "array",
        "bundles": "array",
        "spares": "array"
      }
    },
    "/api/dispatch/dispatch-sale": {
      "method": "POST",
      "description": "Create a dispatch sale with enhanced fields",
      "authentication": "JWT Required",
      "request_body": {
        "customer_id": {
          "type": "UUID",
          "required": true
        },
        "bill_to_id": {
          "type": "UUID",
          "required": false
        },
        "transport_id": {
          "type": "UUID",
          "required": false
        },
        "vehicle_id": {
          "type": "UUID",
          "required": false
        },
        "invoice_number": {
          "type": "string",
          "required": false
        },
        "notes": {
          "type": "string",
          "required": false
        },
        "rolls": {
          "type": "array",
          "required": true,
          "items": {
            "roll_id": "UUID",
            "quantity": "float (length in meters or count)"
          }
        }
      },
      "response": {
        "success": "boolean",
        "dispatch_id": "UUID",
        "total_quantity": "float",
        "rolls_dispatched": "integer"
      }
    },
    "/api/dispatch/create-dispatch": {
      "method": "POST",
      "description": "Create a new dispatch using inventory_stock (new modular system)",
      "authentication": "JWT Required",
      "request_body": {
        "customer_id": {
          "type": "UUID",
          "required": true
        },
        "bill_to_id": {
          "type": "UUID",
          "required": false
        },
        "transport_id": {
          "type": "UUID",
          "required": false
        },
        "vehicle_id": {
          "type": "UUID",
          "required": false
        },
        "invoice_number": {
          "type": "string",
          "required": false
        },
        "notes": {
          "type": "string",
          "required": false
        },
        "dispatch_date": {
          "type": "date",
          "required": false,
          "description": "Optional for backdating"
        },
        "items": {
          "type": "array",
          "required": true,
          "items": {
            "stock_id": "UUID (required)",
            "product_variant_id": "UUID (required)",
            "item_type": "string (FULL_ROLL|CUT_PIECE|BUNDLE|SPARE_PIECES) (required)",
            "quantity": "number (required)",
            "cut_piece_id": "UUID (for CUT_PIECE)",
            "length_meters": "number (for CUT_PIECE)",
            "spare_piece_ids": "array of UUID (for SPARE_PIECES)",
            "piece_count": "number (for SPARE_PIECES)",
            "bundle_size": "number (for BUNDLE)",
            "pieces_per_bundle": "number (for BUNDLE)",
            "piece_length_meters": "number (for BUNDLE)"
          }
        }
      },
      "response": {
        "success": "boolean",
        "dispatch_id": "UUID",
        "dispatch_number": "string",
        "total_items": "integer",
        "items_count": "integer"
      }
    },
    "/api/dispatch/dispatches": {
      "method": "GET",
      "description": "Get all dispatches with summary information",
      "authentication": "JWT Required",
      "response": {
        "type": "array",
        "items": {
          "id": "UUID",
          "dispatch_number": "string",
          "dispatch_date": "date",
          "status": "string",
          "invoice_number": "string",
          "notes": "string",
          "customer_name": "string",
          "customer_city": "string",
          "bill_to_name": "string",
          "transport_name": "string",
          "vehicle_driver": "string",
          "vehicle_number": "string",
          "total_items": "integer",
          "total_quantity": "integer",
          "created_by_email": "string",
          "created_at": "datetime"
        }
      }
    },
    "/api/dispatch/dispatches/<dispatch_id>": {
      "method": "GET",
      "description": "Get detailed information for a specific dispatch including all items",
      "authentication": "JWT Required",
      "response": {
        "id": "UUID",
        "dispatch_number": "string",
        "dispatch_date": "date",
        "status": "string",
        "invoice_number": "string",
        "notes": "string",
        "customer_id": "UUID",
        "customer_name": "string",
        "customer_city": "string",
        "bill_to_id": "UUID",
        "bill_to_name": "string",
        "transport_id": "UUID",
        "transport_name": "string",
        "vehicle_id": "UUID",
        "vehicle_driver": "string",
        "vehicle_number": "string",
        "created_by_email": "string",
        "created_at": "datetime",
        "items": "array"
      }
    }
  },
  "return_routes": {
    "/api/returns/create": {
      "method": "POST",
      "description": "Create a new return from customer and add items back to inventory",
      "authentication": "JWT Required",
      "request_body": {
        "customer_id": {
          "type": "UUID",
          "required": true
        },
        "return_date": {
          "type": "date (YYYY-MM-DD)",
          "required": false,
          "description": "Defaults to today"
        },
        "notes": {
          "type": "string",
          "required": false
        },
        "items": {
          "type": "array",
          "required": true,
          "items": {
            "product_type_id": "UUID (required)",
            "brand_id": "UUID (required)",
            "parameters": "object (required) {OD: '32', PN: '6', PE: '63'}",
            "item_type": "string (FULL_ROLL|CUT_ROLL|BUNDLE|SPARE_PIECES) (required)",
            "quantity": "number (required)",
            "rolls": "array (for FULL_ROLL/CUT_ROLL) [{length_meters: number}]",
            "bundles": "array (for BUNDLE) [{bundle_size: number, piece_length_meters: number}]",
            "piece_count": "number (for SPARE_PIECES)",
            "piece_length_meters": "number (for SPARE_PIECES)",
            "notes": "string (optional)"
          }
        }
      },
      "response": {
        "success": "boolean",
        "message": "string",
        "return_id": "UUID",
        "return_number": "string",
        "transaction_id": "UUID"
      }
    },
    "/api/returns/history": {
      "method": "GET",
      "description": "Get return history with filters",
      "authentication": "JWT Required",
      "query_params": {
        "customer_id": {
          "type": "UUID",
          "required": false
        },
        "start_date": {
          "type": "date (YYYY-MM-DD)",
          "required": false
        },
        "end_date": {
          "type": "date (YYYY-MM-DD)",
          "required": false
        },
        "status": {
          "type": "string",
          "required": false
        },
        "search": {
          "type": "string",
          "required": false,
          "description": "Searches return_number, customer name"
        }
      },
      "response": {
        "returns": {
          "type": "array",
          "items": {
            "id": "UUID",
            "return_number": "string",
            "return_date": "date",
            "status": "string",
            "notes": "string",
            "total_amount": "float",
            "customer_id": "UUID",
            "customer_name": "string",
            "customer_city": "string",
            "customer_phone": "string",
            "created_by_email": "string",
            "item_count": "integer",
            "total_quantity": "integer",
            "created_at": "datetime",
            "updated_at": "datetime"
          }
        }
      }
    },
    "/api/returns/<return_id>": {
      "method": "GET",
      "description": "Get detailed information about a specific return including all items",
      "authentication": "JWT Required",
      "response": {
        "id": "UUID",
        "return_number": "string",
        "return_date": "date",
        "status": "string",
        "notes": "string",
        "total_amount": "float",
        "customer": "object",
        "created_by_email": "string",
        "created_at": "datetime",
        "updated_at": "datetime",
        "items": "array"
      }
    },
    "/api/returns/<return_id>/revert": {
      "method": "POST",
      "description": "Revert/cancel a return",
      "authentication": "JWT Required",
      "response": {
        "success": "boolean",
        "message": "string"
      }
    },
    "/api/returns/stats": {
      "method": "GET",
      "description": "Get return statistics",
      "authentication": "JWT Required",
      "response": {
        "total_returns": "integer",
        "by_status": {
          "received": "integer",
          "inspected": "integer",
          "restocked": "integer",
          "cancelled": "integer"
        },
        "last_30_days": "integer",
        "last_7_days": "integer"
      }
    }
  },
  "scrap_routes": {
    "/api/scraps/create": {
      "method": "POST",
      "description": "Create a new scrap record and remove items from inventory",
      "authentication": "JWT Required (user role)",
      "request_body": {
        "scrap_date": {
          "type": "date (YYYY-MM-DD)",
          "required": false,
          "description": "Defaults to today"
        },
        "reason": {
          "type": "string",
          "required": true
        },
        "notes": {
          "type": "string",
          "required": false
        },
        "items": {
          "type": "array",
          "required": true,
          "items": {
            "stock_id": "UUID (required)",
            "quantity_to_scrap": "number (required)",
            "piece_ids": "array of UUID (for CUT_ROLL or SPARE items)",
            "estimated_value": "number (optional)",
            "notes": "string (optional)"
          }
        }
      },
      "response": {
        "message": "string",
        "scrap_id": "UUID",
        "scrap_number": "string",
        "total_quantity": "float",
        "total_estimated_loss": "float",
        "items_processed": "array"
      }
    },
    "/api/scraps/history": {
      "method": "GET",
      "description": "Get scrap history with filters",
      "authentication": "JWT Required",
      "query_params": {
        "start_date": {
          "type": "date",
          "required": false
        },
        "end_date": {
          "type": "date",
          "required": false
        },
        "reason": {
          "type": "string",
          "required": false
        },
        "status": {
          "type": "string",
          "required": false
        }
      },
      "response": {
        "scraps": {
          "type": "array",
          "items": {
            "id": "UUID",
            "scrap_number": "string",
            "scrap_date": "date",
            "reason": "string",
            "status": "string",
            "total_quantity": "float",
            "estimated_loss": "float",
            "notes": "string",
            "total_items": "integer",
            "total_batches": "integer",
            "created_by_email": "string",
            "created_at": "datetime",
            "updated_at": "datetime"
          }
        }
      }
    },
    "/api/scraps/history/<scrap_id>": {
      "method": "GET",
      "description": "Get detailed information about a specific scrap",
      "authentication": "JWT Required",
      "response": {
        "id": "UUID",
        "scrap_number": "string",
        "scrap_date": "date",
        "reason": "string",
        "status": "string",
        "total_quantity": "float",
        "estimated_loss": "float",
        "notes": "string",
        "created_by_email": "string",
        "created_at": "datetime",
        "updated_at": "datetime",
        "items": "array"
      }
    },
    "/api/scraps/reasons": {
      "method": "GET",
      "description": "Get common scrap reasons",
      "authentication": "JWT Required",
      "response": {
        "reasons": "array of strings"
      }
    },
    "/api/scraps/<scrap_id>/revert": {
      "method": "POST",
      "description": "Revert/cancel a scrap transaction",
      "authentication": "JWT Required (admin role)",
      "response": {
        "success": "boolean",
        "message": "string"
      }
    }
  },
  "inventory_routes": {
    "/api/inventory/batches": {
      "method": "GET",
      "description": "Get all batches with aggregate inventory stock",
      "authentication": "JWT Required",
      "response": {
        "type": "array",
        "items": {
          "id": "UUID",
          "batch_code": "string",
          "batch_no": "string",
          "current_quantity": "float",
          "production_date": "date",
          "attachment_url": "string",
          "created_at": "datetime",
          "product_variant_id": "UUID",
          "parameters": "object",
          "product_type_id": "UUID",
          "product_type_name": "string",
          "brand_id": "UUID",
          "brand_name": "string",
          "stock_entries": "array"
        }
      }
    },
    "/api/inventory/product-types": {
      "method": "GET",
      "description": "Get all product types",
      "authentication": "JWT Required",
      "response": {
        "type": "array",
        "items": {
          "id": "UUID",
          "name": "string",
          "unit_name": "string",
          "unit_abbr": "string"
        }
      }
    },
    "/api/inventory/brands": {
      "method": "GET",
      "description": "Get all brands",
      "authentication": "JWT Required",
      "response": {
        "type": "array",
        "items": {
          "id": "UUID",
          "name": "string"
        }
      }
    },
    "/api/inventory/batches/<batch_id>": {
      "method": "PUT",
      "description": "Update batch details (admin only)",
      "authentication": "JWT Required (admin role)",
      "request_body": {
        "batch_no": {
          "type": "string",
          "required": false
        },
        "batch_code": {
          "type": "string",
          "required": false
        },
        "notes": {
          "type": "string",
          "required": false
        }
      },
      "response": {
        "message": "string"
      }
    },
    "/api/inventory/stock/<stock_id>": {
      "method": "PUT",
      "description": "Update stock entry details (admin only)",
      "authentication": "JWT Required (admin role)",
      "request_body": {
        "quantity": {
          "type": "integer",
          "required": false
        },
        "status": {
          "type": "string (IN_STOCK|DISPATCHED|RESERVED)",
          "required": false
        },
        "notes": {
          "type": "string",
          "required": false
        }
      },
      "response": {
        "message": "string"
      }
    },
    "/api/inventory/cut-roll": {
      "method": "POST",
      "description": "Cut a full roll or cut roll into smaller pieces",
      "authentication": "JWT Required",
      "request_body": {
        "stock_id": {
          "type": "UUID",
          "required": true
        },
        "piece_id": {
          "type": "UUID",
          "required": false,
          "description": "Specific piece to cut for CUT_ROLL"
        },
        "cut_lengths": {
          "type": "array of float",
          "required": true,
          "description": "Array of lengths in meters"
        }
      },
      "response": {
        "message": "string",
        "cut_pieces": "array of float"
      }
    },
    "/api/inventory/customers": {
      "method": "GET",
      "description": "Get all customers",
      "authentication": "JWT Required",
      "response": {
        "type": "array",
        "items": {
          "id": "UUID",
          "name": "string"
        }
      }
    },
    "/api/inventory/search": {
      "method": "POST",
      "description": "Search for available stock by product type, brand, and parameters",
      "authentication": "JWT Required",
      "request_body": {
        "product_type_id": {
          "type": "UUID",
          "required": true
        },
        "brand_id": {
          "type": "UUID",
          "required": false
        },
        "parameters": {
          "type": "object",
          "required": false
        }
      },
      "response": {
        "type": "array",
        "items": {
          "id": "UUID",
          "batch_id": "UUID",
          "status": "string",
          "stock_type": "string",
          "quantity": "integer",
          "length_meters": "float",
          "bundle_size": "integer",
          "piece_length_meters": "float",
          "product_variant_id": "UUID",
          "batch_code": "string",
          "batch_no": "string",
          "product_type_name": "string",
          "brand_name": "string",
          "product_category": "string",
          "parameters": "object",
          "is_cut_roll": "boolean",
          "bundle_type": "string",
          "piece_count": "integer",
          "piece_ids": "array of UUID"
        }
      }
    },
    "/api/inventory/product-variants/search": {
      "method": "GET",
      "description": "Search product variants by batch code or parameters",
      "authentication": "JWT Required",
      "query_params": {
        "product_type_id": {
          "type": "UUID",
          "required": true
        },
        "brand_id": {
          "type": "UUID",
          "required": true
        },
        "search": {
          "type": "string",
          "required": true,
          "description": "Min 2 characters"
        }
      },
      "response": {
        "type": "array",
        "items": {
          "variant_id": "UUID",
          "parameters": "object",
          "product_type": "string",
          "brand": "string",
          "batch_code": "string",
          "current_quantity": "float"
        }
      }
    },
    "/api/inventory/split-bundle": {
      "method": "POST",
      "description": "Split a bundle into spare pieces",
      "authentication": "JWT Required",
      "request_body": {
        "stock_id": {
          "type": "UUID",
          "required": true
        },
        "pieces_to_split": {
          "type": "array of integer",
          "required": true,
          "description": "Array of piece counts to split"
        }
      },
      "response": {
        "message": "string",
        "spare_groups": "array of integer"
      }
    },
    "/api/inventory/combine-spares": {
      "method": "POST",
      "description": "Combine spare pieces into a bundle",
      "authentication": "JWT Required",
      "request_body": {
        "stock_id": {
          "type": "UUID",
          "required": true
        },
        "spare_piece_ids": {
          "type": "array of UUID",
          "required": true,
          "description": "Specific spare piece IDs to combine"
        },
        "bundle_size": {
          "type": "integer",
          "required": true,
          "description": "Custom bundle size"
        },
        "number_of_bundles": {
          "type": "integer",
          "required": false,
          "description": "Defaults to 1"
        }
      },
      "response": {
        "message": "string",
        "bundles_created": "integer",
        "bundle_size": "integer",
        "remainder": "integer"
      }
    }
  },
  "production_routes": {
    "/api/production/batch": {
      "method": "POST",
      "description": "Create a new production batch with rolls",
      "authentication": "JWT Required (user role)",
      "content_type": "multipart/form-data or application/json",
      "request_body": {
        "product_type_id": {
          "type": "UUID",
          "required": true
        },
        "brand_id": {
          "type": "UUID",
          "required": true
        },
        "parameters": {
          "type": "object",
          "required": false
        },
        "production_date": {
          "type": "date",
          "required": false
        },
        "quantity": {
          "type": "float",
          "required": true,
          "description": "Initial quantity or total units"
        },
        "initial_quantity": {
          "type": "float",
          "required": false,
          "description": "Alias for quantity"
        },
        "batch_no": {
          "type": "string",
          "required": false,
          "description": "Auto-generated if not provided"
        },
        "batch_code": {
          "type": "string",
          "required": false,
          "description": "Auto-generated if not provided"
        },
        "notes": {
          "type": "string",
          "required": false
        },
        "roll_config_type": {
          "type": "string (standard_rolls|bundles)",
          "required": false,
          "description": "Defaults to standard_rolls"
        },
        "length_per_roll": {
          "type": "float",
          "required": false,
          "description": "Length of each roll/piece"
        },
        "lengthPerRoll": {
          "type": "float",
          "required": false,
          "description": "Alias for length_per_roll"
        },
        "roll_length": {
          "type": "float",
          "required": false,
          "description": "Alias for length_per_roll"
        },
        "piece_length": {
          "type": "float",
          "required": false,
          "description": "Alias for length_per_roll"
        },
        "number_of_rolls": {
          "type": "integer",
          "required": false,
          "description": "Number of standard rolls"
        },
        "cut_rolls": {
          "type": "array",
          "required": false,
          "description": "Array of cut roll specifications"
        },
        "quantity_based": {
          "type": "boolean",
          "required": false,
          "description": "For sprinkler pipes"
        },
        "number_of_bundles": {
          "type": "integer",
          "required": false
        },
        "bundle_size": {
          "type": "integer",
          "required": false,
          "description": "Defaults to 10"
        },
        "spare_pipes": {
          "type": "array",
          "required": false,
          "description": "Array of spare pipe specifications"
        },
        "weight_per_meter": {
          "type": "float",
          "required": false,
          "description": "Weight in kg/m"
        },
        "total_weight": {
          "type": "float",
          "required": false,
          "description": "Total weight in kg"
        },
        "attachment": {
          "type": "file",
          "required": false,
          "description": "Batch attachment (multipart/form-data)"
        }
      },
      "response": {
        "id": "UUID",
        "batch_code": "string",
        "message": "string"
      }
    },
    "/api/production/attachment/<filename>": {
      "method": "GET",
      "description": "Serve uploaded batch attachments",
      "authentication": "None",
      "response": "File download"
    },
    "/api/production/history": {
      "method": "GET",
      "description": "Get production batch history",
      "authentication": "JWT Required (user role)",
      "response": {
        "batches": {
          "type": "array",
          "items": {
            "id": "UUID",
            "batch_no": "string",
            "batch_code": "string",
            "production_date": "date",
            "initial_quantity": "float",
            "product_type_name": "string",
            "brand_name": "string",
            "parameters": "object",
            "notes": "string",
            "attachment_url": "string",
            "weight_per_meter": "float",
            "total_weight": "float",
            "piece_length": "float",
            "total_items": "integer",
            "created_by_email": "string",
            "created_at": "datetime"
          }
        }
      }
    },
    "/api/production/history/<batch_id>": {
      "method": "GET",
      "description": "Get detailed information about a specific production batch",
      "authentication": "JWT Required (user role)",
      "response": {
        "id": "UUID",
        "batch_no": "string",
        "batch_code": "string",
        "production_date": "date",
        "initial_quantity": "float",
        "product_type_name": "string",
        "brand_name": "string",
        "parameters": "object",
        "notes": "string",
        "attachment_url": "string",
        "weight_per_meter": "float",
        "total_weight": "float",
        "piece_length": "float",
        "created_by_email": "string",
        "created_at": "datetime",
        "updated_at": "datetime",
        "items": "array"
      }
    }
  },
  "transaction_routes": {
    "/api/transactions/": {
      "method": "POST",
      "description": "Create a new transaction",
      "authentication": "JWT Required (user role)",
      "request_body": {
        "transaction_type": {
          "type": "string",
          "required": true
        },
        "batch_id": {
          "type": "UUID",
          "required": true
        },
        "roll_id": {
          "type": "UUID",
          "required": false
        },
        "quantity_change": {
          "type": "float",
          "required": true
        },
        "customer_id": {
          "type": "UUID",
          "required": false
        },
        "invoice_no": {
          "type": "string",
          "required": false
        },
        "notes": {
          "type": "string",
          "required": false
        }
      },
      "response": {
        "id": "UUID",
        "message": "string"
      }
    },
    "/api/transactions/": {
      "method": "GET",
      "description": "Get comprehensive transaction history with product details",
      "authentication": "JWT Required",
      "query_params": {
        "start_date": {
          "type": "datetime (IST)",
          "required": false
        },
        "end_date": {
          "type": "datetime (IST)",
          "required": false
        }
      },
      "response": {
        "type": "array",
        "items": {
          "id": "string",
          "dispatch_id": "UUID",
          "transaction_type": "string",
          "quantity_change": "float",
          "transaction_date": "datetime",
          "invoice_no": "string",
          "notes": "string",
          "created_at": "datetime",
          "roll_snapshot": "object",
          "batch_code": "string",
          "batch_no": "string",
          "initial_quantity": "float",
          "weight_per_meter": "float",
          "total_weight": "float",
          "piece_length": "float",
          "attachment_url": "string",
          "production_date": "datetime",
          "product_type": "string",
          "product_variant_id": "UUID",
          "product_type_id": "UUID",
          "brand_id": "UUID",
          "brand": "string",
          "parameters": "object",
          "roll_length_meters": "float",
          "roll_initial_length_meters": "float",
          "roll_is_cut": "boolean",
          "roll_type": "string",
          "roll_bundle_size": "integer",
          "roll_weight": "float",
          "unit_abbreviation": "string",
          "customer_name": "string",
          "customer_city": "string",
          "created_by_email": "string",
          "created_by_username": "string",
          "created_by_name": "string"
        }
      }
    },
    "/api/transactions/revert": {
      "method": "POST",
      "description": "Revert one or more transactions",
      "authentication": "JWT Required (user role)",
      "request_body": {
        "transaction_ids": {
          "type": "array of string",
          "required": true,
          "description": "Array of transaction IDs (with prefixes: txn_, inv_, dispatch_, return_, scrap_)"
        }
      },
      "response": {
        "reverted_count": "integer",
        "total_requested": "integer",
        "failed_transactions": "array"
      }
    }
  }
}
